#!/bin/bash

build solution
call ./parse_dependencies.py obtaining call_dependencies.csv 

./calls2dv8.py ../design/hotelreservation/call_dependencies.csv ./call_dependencies-hotelreservation.json
./calls2dv8.py ../design/trainticket/CUHK-SE/call_dependencies.csv ./call_dependencies-trainticket-CUHK-SE.json
./calls2dv8.py ../design/trainticket/FUDAN/parse_tag100/call_dependencies.csv ./call_dependencies-trainticket-FUDAN_tag100.json
./calls2dv8.py ../design/trainticket/SEALAB/call_dependencies.csv ./call_dependencies-trainticket-SEALAB.json

/Applications/DV8/bin/dv8-console core:convert-matrix ./call_dependencies-hotelreservation.json
/Applications/DV8/bin/dv8-console core:convert-matrix ./call_dependencies-trainticket-CUHK-SE.json
/Applications/DV8/bin/dv8-console core:convert-matrix ./call_dependencies-trainticket-FUDAN_tag100.json
/Applications/DV8/bin/dv8-console core:convert-matrix ./call_dependencies-trainticket-SEALAB.json

mkdir dv8-hotelreservation
mkdir dv8-dependencies-trainticket-CUHK-SE
mkdir dv8-dependencies-trainticket-FUDAN_tag100
mkdir dv8-dependencies-trainticket-SEALAB

/Applications/DV8/bin/dv8-console arch-issue -outputFolder ./dv8-hotelreservation ./call_dependencies-hotelreservation.dv8-dsm  
/Applications/DV8/bin/dv8-console arch-issue -outputFolder ./dv8-trainticket-CUHK-SE ./call_dependencies-trainticket-CUHK-SE.dv8-dsm
/Applications/DV8/bin/dv8-console arch-issue -outputFolder ./dv8-trainticket-FUDAN_tag100 ./call_dependencies-trainticket-FUDAN_tag100.dv8-dsm
/Applications/DV8/bin/dv8-console arch-issue -outputFolder ./dv8-trainticket-SEALAB ./call_dependencies-trainticket-SEALAB.dv8-dsm

./calls2graph2.py ../design/hotelreservation/call_dependencies.csv ./graph-hotelreservation2.pdf --cropleft 7 --cropbottom 10 --cropright 7 --croptop 5
./calls2graph2.py ../design/trainticket/CUHK-SE/call_dependencies.csv ./graph-trainticket-CUHK-SE2.pdf --cropleft 18 --cropbottom 10 --cropright 18 --croptop 5
./calls2graph2.py ../design/trainticket/FUDAN/parse_tag100/call_dependencies.csv ./graph-trainticket-FUDAN_tag1002.pdf --cropleft 18 --cropbottom 10 --cropright 18 --croptop 5
./calls2graph2.py ../design/trainticket/SEALAB/call_dependencies.csv ./graph-trainticket-SEALAB2.pdf --cropleft 18 --cropbottom 10 --cropright 18 --croptop 5

